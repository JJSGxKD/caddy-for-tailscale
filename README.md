# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Caddy –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Tailscale Serve –Ω–∞ Windows 11

## üìå –ß—Ç–æ —ç—Ç–æ?

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (API, WebSocket, –∞–¥–º–∏–Ω–∫–∏ –∏ —Ç.–¥.) —á–µ—Ä–µ–∑ Tailscale Serve, –∏—Å–ø–æ–ª—å–∑—É—è Caddy –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Windows 11 Pro/Enterprise (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏)
- –í–∫–ª—é—á—ë–Ω–Ω–∞—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ BIOS
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Hyper-V **–∏–ª–∏** WSL2
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [Git](https://git-scm.com/download/win)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [Docker Desktop](https://www.docker.com/products/docker-desktop/)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [Tailscale](https://tailscale.com/download/windows)

---

## üöÄ –®–∞–≥–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É

### 1. –í–∫–ª—é—á–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é

- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ü–ö –∏ –∑–∞–π–¥–∏—Ç–µ –≤ BIOS/UEFI.
- –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é **Intel VT-x / AMD-V** –∏–ª–∏ **Virtualization Technology**.
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å.

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Git –∏ Docker Desktop

- –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞.
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Desktop –∏ –≤—ã–±–µ—Ä–∏—Ç–µ **—Ä–µ–∂–∏–º Hyper-V –∏–ª–∏ WSL2**.

  - –ï—Å–ª–∏ Hyper-V –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –≤–∫–ª—é—á–∏—Ç–µ WSL2 (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –æ—Ç Microsoft](https://learn.microsoft.com/windows/wsl/install)).

> üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker —Ä–∞–±–æ—Ç–∞–µ—Ç.

### 3. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/JJSGxKD/caddy-for-tailscale.git
```

–∏–ª–∏ —Å–∫–∞—á–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤—Ä—É—á–Ω—É—é.

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `Caddyfile`

–ü—Ä–∏–º–µ—Ä `Caddyfile` —É–∂–µ –ø—Ä–∏–ª–æ–∂–µ–Ω. –ó–∞–º–µ–Ω–∏—Ç–µ `DOMAIN` –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ Tailscale (–Ω–∞–ø—Ä–∏–º–µ—Ä: `desktop.tail908.ts.net`), –∏ —É–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø—É—Ç–∏ –∏ –ø–æ—Ä—Ç—ã

–ß–∏—Ç–∞–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ `Caddyfile`!

–í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –±–ª–æ–∫–∏ `handle_path`.

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
docker compose up -d
```

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç Caddy –Ω–∞ –ø–æ—Ä—Ç–∞—Ö `80`, `443`, `443/udp`.

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tailscale Serve

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Tailscale

–ó–∞–ø—É—Å—Ç–∏—Ç–µ Tailscale –∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç.

### 2. –í–∫–ª—é—á–∏—Ç—å Tailscale Serve

–ó–∞–ø—É—Å–∫–∞—Ç—å –≤ Powershell

```bash
tailscale serve 443
```

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω —á–µ—Ä–µ–∑ Caddy –∏ –¥–∞–π—Ç–µ Tailscale –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç—É 443 (–∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ).

> üí° –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [MagicDNS](https://tailscale.com/kb/1081/magicdns/) –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –ø–æ –¥–æ–º–µ–Ω—É `https://–≤–∞—à-—Ö–≤–æ—Å—Ç.tailXXX.ts.net`.
